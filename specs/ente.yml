# spec for building images from the ente repository
repository: ente-io/ente
ref: main
builds:
  - name: ente-server
    context: server
    dockerfile: server/Dockerfile
    # curl -s https://api.ente.io/ping | jq '.id'
    ref: 915211fb10b19d444ad2b92d6b3d170c07eae234 # ente-commit
    imageTags: DATE,REF # DATE and REF get replace by 0.0.[date]-[build] and REF by the closest ref value
    buildArgs:
      - GIT_COMMIT=915211fb10b19d444ad2b92d6b3d170c07eae234
  - name: ente-web
    dockerfile: web/Dockerfile
    imageTags: DATE,REF # DATE and REF get replace by 0.0.[date]-[build] and REF by the closest ref value
    clean_runner: true
